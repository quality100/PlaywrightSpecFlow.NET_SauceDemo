pipeline{
    agent{
        docker{
            image 'mcr.microsoft.com/playwright/dotnet:v1.25.0-focal'
        }     
    }
    stages{
        stage('install playwright'){
            steps{
                withDotNet(sdk: '.Net 6.0') {
                     dotnetBuild project: 'var/lib/jenkins/workspace/saucedemo_playwright/PlaywrightSpecFlow.NET_SauceDemo.sln', sdk: '.Net 6.0'
                  }
                sh 'pwsh playwright_specflow/bin/Debug/net6.0/playwright.ps1 install --with-deps'
            }
        }
        stage('Tests Run'){
             steps{
              sh 'dotnet Test' 
            }
        }
    }
}